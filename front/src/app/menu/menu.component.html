<form [formGroup]="users" (ngSubmit)="onSubmit()">
  <ng-container *ngFor="let player of getControlNames(users); let i = index">

      <h3>Joueur {{ i + 1 }}</h3>

      <div formGroupName="{{player}}">
        <label for="pseudo">Pseudo:</label>
        <input type="text" id="pseudo" formControlName="pseudo" required>
      </div>

      <div formGroupName="{{player}}">
        <label for="image_path">Image de profil :</label>
        <select id="image_path" formControlName="image_path" (change)="updateImage(i, $event)">
          <option [value]="getImageUrl(i)" selected>{{getKeyByValue(getImageUrl(i))}}</option>
          <option *ngFor="let field of fields" [value]="field">{{field}}</option>
        </select>
      </div>

      <div>
        <img [src]="getImageUrl(i)"  alt="Image">
      </div>
  </ng-container>

  <button type="submit" [disabled]="!users.valid" (click)=onContinue()>JOUER</button>
</form>

<router-outlet></router-outlet>
